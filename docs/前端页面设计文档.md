# å‰ç«¯é¡µé¢è®¾è®¡æ–‡æ¡£

> FastAPI + LangGraph å¯¹è¯ç³»ç»Ÿå‰ç«¯è®¾è®¡è§„èŒƒ

## ğŸ“‹ ç›®å½•

- [é¡¹ç›®æ¦‚è¿°](#é¡¹ç›®æ¦‚è¿°)
- [æŠ€æœ¯æ ˆå»ºè®®](#æŠ€æœ¯æ ˆå»ºè®®)
- [é¡µé¢ç»“æ„](#é¡µé¢ç»“æ„)
- [é¡µé¢è¯¦ç»†è®¾è®¡](#é¡µé¢è¯¦ç»†è®¾è®¡)
- [ç»„ä»¶è®¾è®¡](#ç»„ä»¶è®¾è®¡)
- [çŠ¶æ€ç®¡ç†](#çŠ¶æ€ç®¡ç†)
- [API é›†æˆ](#api-é›†æˆ)
- [UI/UX è®¾è®¡è§„èŒƒ](#uiux-è®¾è®¡è§„èŒƒ)
- [å“åº”å¼è®¾è®¡](#å“åº”å¼è®¾è®¡)

---

## é¡¹ç›®æ¦‚è¿°

### åŠŸèƒ½æ¨¡å—

1. **ç”¨æˆ·è®¤è¯ç³»ç»Ÿ**
   - ç”¨æˆ·æ³¨å†Œ/ç™»å½•
   - JWT åŒä»¤ç‰Œè®¤è¯
   - ç”¨æˆ·ä¿¡æ¯ç®¡ç†
   - å¯†ç é‡ç½®

2. **å¯¹è¯ç³»ç»Ÿ**
   - æµå¼/éæµå¼å¯¹è¯
   - ä¼šè¯ç®¡ç†ï¼ˆCRUDï¼‰
   - æ¶ˆæ¯å†å²
   - æ¶ˆæ¯é‡æ–°ç”Ÿæˆ

3. **ä¼šè¯ç®¡ç†**
   - ä¼šè¯åˆ—è¡¨
   - ä¼šè¯è¯¦æƒ…
   - ä¼šè¯æœç´¢
   - ä¼šè¯å¯¼å‡º/å¯¼å…¥
   - ä¼šè¯é‡ç½®

4. **ç”¨æˆ·è®¾ç½®**
   - é»˜è®¤ LLM å‚æ•°é…ç½®
   - ä¸»é¢˜åˆ‡æ¢ï¼ˆäº®è‰²/æš—è‰²ï¼‰
   - è¯­è¨€åˆ‡æ¢
   - ä¸ªæ€§åŒ–è®¾ç½®

5. **ç”¨æˆ·ç®¡ç†ï¼ˆç®¡ç†å‘˜ï¼‰**
   - ç”¨æˆ·åˆ—è¡¨
   - ç”¨æˆ·è¯¦æƒ…
   - ç”¨æˆ· CRUD æ“ä½œ

---

## æŠ€æœ¯æ ˆå»ºè®®

### æ¨èæŠ€æœ¯æ ˆ

| æŠ€æœ¯ | ç”¨é€” | æ¨èç‰ˆæœ¬ |
|------|------|----------|
| React | UI æ¡†æ¶ | 18.2+ |
| TypeScript | ç±»å‹å®‰å…¨ | 5.0+ |
| Vite | æ„å»ºå·¥å…· | 5.0+ |
| React Router | è·¯ç”±ç®¡ç† | 6.20+ |
| Zustand / Redux Toolkit | çŠ¶æ€ç®¡ç† | 4.4+ / 2.0+ |
| TanStack Query | æ•°æ®è·å– | 5.0+ |
| Axios | HTTP å®¢æˆ·ç«¯ | 1.6+ |
| Tailwind CSS | æ ·å¼æ¡†æ¶ | 3.4+ |
| shadcn/ui | UI ç»„ä»¶åº“ | Latest |
| React Hook Form | è¡¨å•ç®¡ç† | 7.49+ |
| Zod | æ•°æ®éªŒè¯ | 3.22+ |
| EventSource | SSE æµå¼å“åº” | Native |

### é¡¹ç›®ç»“æ„å»ºè®®

```
frontend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ api/                    # API è°ƒç”¨å±‚
â”‚   â”‚   â”œâ”€â”€ auth.ts            # è®¤è¯ç›¸å…³ API
â”‚   â”‚   â”œâ”€â”€ chat.ts            # å¯¹è¯ç›¸å…³ API
â”‚   â”‚   â”œâ”€â”€ conversations.ts   # ä¼šè¯ç›¸å…³ API
â”‚   â”‚   â”œâ”€â”€ users.ts           # ç”¨æˆ·ç›¸å…³ API
â”‚   â”‚   â””â”€â”€ client.ts          # Axios å®ä¾‹é…ç½®
â”‚   â”œâ”€â”€ components/             # é€šç”¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ui/                # åŸºç¡€ UI ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ chat/              # å¯¹è¯ç›¸å…³ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ conversation/      # ä¼šè¯ç›¸å…³ç»„ä»¶
â”‚   â”‚   â””â”€â”€ layout/            # å¸ƒå±€ç»„ä»¶
â”‚   â”œâ”€â”€ pages/                 # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ auth/              # è®¤è¯é¡µé¢
â”‚   â”‚   â”œâ”€â”€ chat/              # å¯¹è¯é¡µé¢
â”‚   â”‚   â”œâ”€â”€ conversations/     # ä¼šè¯ç®¡ç†é¡µé¢
â”‚   â”‚   â”œâ”€â”€ settings/          # è®¾ç½®é¡µé¢
â”‚   â”‚   â””â”€â”€ admin/             # ç®¡ç†é¡µé¢
â”‚   â”œâ”€â”€ hooks/                 # è‡ªå®šä¹‰ Hooks
â”‚   â”‚   â”œâ”€â”€ useAuth.ts         # è®¤è¯ Hook
â”‚   â”‚   â”œâ”€â”€ useChat.ts         # å¯¹è¯ Hook
â”‚   â”‚   â””â”€â”€ useSSE.ts          # SSE Hook
â”‚   â”œâ”€â”€ store/                 # çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ authStore.ts       # è®¤è¯çŠ¶æ€
â”‚   â”‚   â”œâ”€â”€ chatStore.ts       # å¯¹è¯çŠ¶æ€
â”‚   â”‚   â””â”€â”€ settingsStore.ts    # è®¾ç½®çŠ¶æ€
â”‚   â”œâ”€â”€ types/                 # TypeScript ç±»å‹å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ api.ts             # API ç±»å‹
â”‚   â”‚   â”œâ”€â”€ user.ts            # ç”¨æˆ·ç±»å‹
â”‚   â”‚   â””â”€â”€ conversation.ts    # ä¼šè¯ç±»å‹
â”‚   â”œâ”€â”€ utils/                 # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ storage.ts         # æœ¬åœ°å­˜å‚¨
â”‚   â”‚   â”œâ”€â”€ format.ts          # æ ¼å¼åŒ–å·¥å…·
â”‚   â”‚   â””â”€â”€ constants.ts       # å¸¸é‡å®šä¹‰
â”‚   â”œâ”€â”€ App.tsx                # æ ¹ç»„ä»¶
â”‚   â”œâ”€â”€ main.tsx               # å…¥å£æ–‡ä»¶
â”‚   â””â”€â”€ router.tsx             # è·¯ç”±é…ç½®
â”œâ”€â”€ public/                     # é™æ€èµ„æº
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ vite.config.ts
â””â”€â”€ tailwind.config.js
```

---

## é¡µé¢ç»“æ„

### è·¯ç”±ç»“æ„

```
/                          # é¦–é¡µï¼ˆé‡å®šå‘åˆ° /chatï¼‰
/auth
  â”œâ”€â”€ /login              # ç™»å½•é¡µ
  â””â”€â”€ /register           # æ³¨å†Œé¡µ
/chat                      # å¯¹è¯é¡µé¢ï¼ˆä¸»é¡µé¢ï¼‰
  â””â”€â”€ /:threadId?         # æŒ‡å®šä¼šè¯çš„å¯¹è¯é¡µé¢
/conversations             # ä¼šè¯åˆ—è¡¨é¡µ
/conversations/:threadId   # ä¼šè¯è¯¦æƒ…é¡µ
/settings                  # ç”¨æˆ·è®¾ç½®é¡µ
/admin                     # ç®¡ç†åå°ï¼ˆéœ€è¦ç®¡ç†å‘˜æƒé™ï¼‰
  â””â”€â”€ /users              # ç”¨æˆ·ç®¡ç†é¡µ
```

---

## é¡µé¢è¯¦ç»†è®¾è®¡

### 1. ç™»å½•é¡µé¢ (`/auth/login`)

#### åŠŸèƒ½
- ç”¨æˆ·ç™»å½•
- è®°ä½æˆ‘åŠŸèƒ½
- è·³è½¬åˆ°æ³¨å†Œé¡µ
- å¿˜è®°å¯†ç ï¼ˆå¯é€‰ï¼‰

#### UI è®¾è®¡
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Logo / åº”ç”¨åç§°          â”‚
â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ç”¨æˆ·å/é‚®ç®±               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  å¯†ç                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                 â”‚
â”‚  â˜‘ è®°ä½æˆ‘                       â”‚
â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚      ç™»å½•                 â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                 â”‚
â”‚  è¿˜æ²¡æœ‰è´¦å·ï¼Ÿ<æ³¨å†Œ>              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### API è°ƒç”¨
- `POST /api/v1/auth/login`

#### è¡¨å•å­—æ®µ
- `username`: string (å¿…å¡«)
- `password`: string (å¿…å¡«)

#### çŠ¶æ€ç®¡ç†
- ç™»å½•æˆåŠŸåä¿å­˜ `access_token` å’Œ `refresh_token` åˆ° localStorage
- æ›´æ–°å…¨å±€è®¤è¯çŠ¶æ€
- è·³è½¬åˆ° `/chat`

---

### 2. æ³¨å†Œé¡µé¢ (`/auth/register`)

#### åŠŸèƒ½
- ç”¨æˆ·æ³¨å†Œ
- è¡¨å•éªŒè¯
- è·³è½¬åˆ°ç™»å½•é¡µ

#### UI è®¾è®¡
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Logo / åº”ç”¨åç§°          â”‚
â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ç”¨æˆ·å                   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  é‚®ç®±                     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  æ˜µç§°                     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  å¯†ç                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ç¡®è®¤å¯†ç                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚      æ³¨å†Œ                 â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                 â”‚
â”‚  å·²æœ‰è´¦å·ï¼Ÿ<ç™»å½•>                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### API è°ƒç”¨
- `POST /api/v1/auth/register`

#### è¡¨å•å­—æ®µ
- `username`: string (å¿…å¡«ï¼Œ3-20 å­—ç¬¦)
- `email`: string (å¿…å¡«ï¼Œé‚®ç®±æ ¼å¼)
- `nickname`: string (å¯é€‰ï¼Œæœ€å¤§ 50 å­—ç¬¦)
- `password`: string (å¿…å¡«ï¼Œè‡³å°‘ 8 å­—ç¬¦)

---

### 3. å¯¹è¯é¡µé¢ (`/chat`)

#### åŠŸèƒ½
- å‘é€æ¶ˆæ¯ï¼ˆæµå¼/éæµå¼ï¼‰
- æ˜¾ç¤ºæ¶ˆæ¯å†å²
- åˆ›å»ºæ–°ä¼šè¯
- åˆ‡æ¢ä¼šè¯
- æ¶ˆæ¯é‡æ–°ç”Ÿæˆ
- ä¼šè¯é‡ç½®

#### UI è®¾è®¡ï¼ˆä¸‰æ å¸ƒå±€ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          â”‚                      â”‚          â”‚
â”‚  ä¼šè¯    â”‚      å¯¹è¯åŒºåŸŸ          â”‚  è®¾ç½®    â”‚
â”‚  åˆ—è¡¨    â”‚                      â”‚  é¢æ¿    â”‚
â”‚          â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚          â”‚
â”‚  [+]æ–°ä¼šè¯â”‚  â”‚ æ¶ˆæ¯å†å²        â”‚  â”‚  æ¨¡å‹    â”‚
â”‚          â”‚  â”‚                â”‚  â”‚  å‚æ•°    â”‚
â”‚  ä¼šè¯1   â”‚  â”‚ User: Hello    â”‚  â”‚          â”‚
â”‚  ä¼šè¯2   â”‚  â”‚ AI: Hi there!  â”‚  â”‚  æ¸©åº¦    â”‚
â”‚  ä¼šè¯3   â”‚  â”‚                â”‚  â”‚  Max     â”‚
â”‚  ...     â”‚  â”‚                â”‚  â”‚  Tokens  â”‚
â”‚          â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚          â”‚
â”‚          â”‚                      â”‚          â”‚
â”‚          â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚          â”‚
â”‚          â”‚  â”‚ è¾“å…¥æ¡†          â”‚  â”‚          â”‚
â”‚          â”‚  â”‚ [å‘é€] [æµå¼]   â”‚  â”‚          â”‚
â”‚          â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚          â”‚
â”‚          â”‚                      â”‚          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ç»„ä»¶ç»“æ„
- `ChatLayout`: ä¸»å¸ƒå±€ç»„ä»¶
- `ConversationSidebar`: ä¼šè¯åˆ—è¡¨ä¾§è¾¹æ 
- `ChatArea`: å¯¹è¯åŒºåŸŸ
- `MessageList`: æ¶ˆæ¯åˆ—è¡¨
- `MessageItem`: å•æ¡æ¶ˆæ¯ç»„ä»¶
- `ChatInput`: è¾“å…¥æ¡†ç»„ä»¶
- `SettingsPanel`: è®¾ç½®é¢æ¿ï¼ˆå¯æŠ˜å ï¼‰

#### API è°ƒç”¨
- `POST /api/v1/chat` - éæµå¼å¯¹è¯
- `POST /api/v1/chat/stream` - æµå¼å¯¹è¯ï¼ˆSSEï¼‰
- `GET /api/v1/conversations` - è·å–ä¼šè¯åˆ—è¡¨
- `GET /api/v1/conversations/{thread_id}/messages` - è·å–æ¶ˆæ¯å†å²
- `POST /api/v1/conversations/{thread_id}/messages/{message_id}/regenerate` - é‡æ–°ç”Ÿæˆæ¶ˆæ¯
- `POST /api/v1/conversations/{thread_id}/reset` - é‡ç½®ä¼šè¯

#### çŠ¶æ€ç®¡ç†
- å½“å‰ä¼šè¯ ID (`thread_id`)
- æ¶ˆæ¯åˆ—è¡¨
- è¾“å…¥çŠ¶æ€
- æµå¼å“åº”çŠ¶æ€
- åŠ è½½çŠ¶æ€

#### äº¤äº’æµç¨‹

1. **å‘é€æ¶ˆæ¯**
   ```
   ç”¨æˆ·è¾“å…¥ â†’ ç‚¹å‡»å‘é€ â†’ æ˜¾ç¤ºç”¨æˆ·æ¶ˆæ¯ â†’
   è°ƒç”¨ API â†’ æ˜¾ç¤ºåŠ è½½çŠ¶æ€ â†’
   æ¥æ”¶å“åº”ï¼ˆæµå¼/éæµå¼ï¼‰â†’ æ˜¾ç¤º AI å›å¤
   ```

2. **æµå¼å“åº”å¤„ç†**
   ```typescript
   // ä½¿ç”¨ EventSource æˆ– fetch + ReadableStream
   const eventSource = new EventSource('/api/v1/chat/stream');
   eventSource.onmessage = (event) => {
     const data = JSON.parse(event.data);
     if (data.done) {
       eventSource.close();
     } else {
       // è¿½åŠ å†…å®¹åˆ°å½“å‰æ¶ˆæ¯
       appendToMessage(data.content);
     }
   };
   ```

3. **æ¶ˆæ¯é‡æ–°ç”Ÿæˆ**
   ```
   ç‚¹å‡»æ¶ˆæ¯çš„"é‡æ–°ç”Ÿæˆ"æŒ‰é’® â†’
   è°ƒç”¨ regenerate API â†’
   åˆ é™¤è¯¥æ¶ˆæ¯åŠä¹‹åçš„æ¶ˆæ¯ â†’
   æ˜¾ç¤ºæ–°çš„å›å¤
   ```

---

### 4. ä¼šè¯åˆ—è¡¨é¡µé¢ (`/conversations`)

#### åŠŸèƒ½
- æ˜¾ç¤ºæ‰€æœ‰ä¼šè¯
- æœç´¢ä¼šè¯
- åˆ é™¤ä¼šè¯
- ç¼–è¾‘ä¼šè¯æ ‡é¢˜
- å¯¼å‡º/å¯¼å…¥ä¼šè¯

#### UI è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [æœç´¢æ¡†]              [+ æ–°å»ºä¼šè¯] [å¯¼å‡º]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ“ ä¼šè¯æ ‡é¢˜                            â”‚ â”‚
â”‚  â”‚ æœ€åæ¶ˆæ¯é¢„è§ˆ...                        â”‚ â”‚
â”‚  â”‚ 2024-01-15 14:30  [ç¼–è¾‘] [åˆ é™¤] [å¯¼å‡º]â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ“ å¦ä¸€ä¸ªä¼šè¯                           â”‚ â”‚
â”‚  â”‚ æœ€åæ¶ˆæ¯é¢„è§ˆ...                        â”‚ â”‚
â”‚  â”‚ 2024-01-14 10:20  [ç¼–è¾‘] [åˆ é™¤] [å¯¼å‡º]â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                             â”‚
â”‚  [åŠ è½½æ›´å¤š]                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### API è°ƒç”¨
- `GET /api/v1/conversations` - è·å–ä¼šè¯åˆ—è¡¨
- `PATCH /api/v1/conversations/{thread_id}` - æ›´æ–°ä¼šè¯
- `DELETE /api/v1/conversations/{thread_id}` - åˆ é™¤ä¼šè¯
- `GET /api/v1/conversations/{thread_id}/export` - å¯¼å‡ºä¼šè¯
- `POST /api/v1/conversations/import` - å¯¼å…¥ä¼šè¯
- `POST /api/v1/conversations/search` - æœç´¢ä¼šè¯

---

### 5. ä¼šè¯è¯¦æƒ…é¡µé¢ (`/conversations/:threadId`)

#### åŠŸèƒ½
- æ˜¾ç¤ºå®Œæ•´ä¼šè¯ä¿¡æ¯
- æ˜¾ç¤ºæ‰€æœ‰æ¶ˆæ¯
- æŸ¥çœ‹ä¼šè¯çŠ¶æ€
- æŸ¥çœ‹æ£€æŸ¥ç‚¹å†å²
- é‡ç½®ä¼šè¯
- å¯¼å‡ºä¼šè¯

#### UI è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† è¿”å›  ä¼šè¯æ ‡é¢˜                    [è®¾ç½®] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                             â”‚
â”‚  ä¼šè¯ä¿¡æ¯:                                  â”‚
â”‚  - åˆ›å»ºæ—¶é—´: 2024-01-15 10:00              â”‚
â”‚  - æ›´æ–°æ—¶é—´: 2024-01-15 14:30              â”‚
â”‚  - æ¶ˆæ¯æ•°: 10                               â”‚
â”‚                                             â”‚
â”‚  [é‡ç½®ä¼šè¯] [å¯¼å‡º] [åˆ é™¤]                   â”‚
â”‚                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                             â”‚
â”‚  æ¶ˆæ¯å†å²:                                  â”‚
â”‚                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ‘¤ User                               â”‚ â”‚
â”‚  â”‚ Hello, how are you?                  â”‚ â”‚
â”‚  â”‚ 2024-01-15 10:00                     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ¤– Assistant                          â”‚ â”‚
â”‚  â”‚ I'm doing well, thank you!           â”‚ â”‚
â”‚  â”‚ 2024-01-15 10:01  [é‡æ–°ç”Ÿæˆ]          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                             â”‚
â”‚  [åŠ è½½æ›´å¤šæ¶ˆæ¯]                             â”‚
â”‚                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                             â”‚
â”‚  ä¼šè¯çŠ¶æ€:                                  â”‚
â”‚  [æŸ¥çœ‹çŠ¶æ€] [æŸ¥çœ‹æ£€æŸ¥ç‚¹]                    â”‚
â”‚                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### API è°ƒç”¨
- `GET /api/v1/conversations/{thread_id}` - è·å–ä¼šè¯è¯¦æƒ…
- `GET /api/v1/conversations/{thread_id}/messages` - è·å–æ¶ˆæ¯å†å²
- `GET /api/v1/conversations/{thread_id}/state` - è·å–ä¼šè¯çŠ¶æ€
- `GET /api/v1/conversations/{thread_id}/checkpoints` - è·å–æ£€æŸ¥ç‚¹
- `POST /api/v1/conversations/{thread_id}/reset` - é‡ç½®ä¼šè¯

---

### 6. ç”¨æˆ·è®¾ç½®é¡µé¢ (`/settings`)

#### åŠŸèƒ½
- ä¿®æ”¹ç”¨æˆ·ä¿¡æ¯ï¼ˆæ˜µç§°ã€é‚®ç®±ï¼‰
- ä¿®æ”¹å¯†ç 
- é…ç½®é»˜è®¤ LLM å‚æ•°
- åˆ‡æ¢ä¸»é¢˜ï¼ˆäº®è‰²/æš—è‰²ï¼‰
- åˆ‡æ¢è¯­è¨€

#### UI è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç”¨æˆ·è®¾ç½®                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                             â”‚
â”‚  ä¸ªäººä¿¡æ¯                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ç”¨æˆ·å: username (ä¸å¯ä¿®æ”¹)            â”‚ â”‚
â”‚  â”‚ æ˜µç§°: [è¾“å…¥æ¡†]                        â”‚ â”‚
â”‚  â”‚ é‚®ç®±: [è¾“å…¥æ¡†]                        â”‚ â”‚
â”‚  â”‚        [ä¿å­˜]                         â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                             â”‚
â”‚  å¯†ç è®¾ç½®                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ æ—§å¯†ç : [è¾“å…¥æ¡†]                      â”‚ â”‚
â”‚  â”‚ æ–°å¯†ç : [è¾“å…¥æ¡†]                      â”‚ â”‚
â”‚  â”‚ ç¡®è®¤å¯†ç : [è¾“å…¥æ¡†]                    â”‚ â”‚
â”‚  â”‚        [ä¿®æ”¹å¯†ç ]                     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                             â”‚
â”‚  LLM é»˜è®¤å‚æ•°                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ æ¨¡å‹: [ä¸‹æ‹‰é€‰æ‹©]                      â”‚ â”‚
â”‚  â”‚ æ¸©åº¦: [æ»‘å—] 0.7                      â”‚ â”‚
â”‚  â”‚ Max Tokens: [è¾“å…¥æ¡†] 2000            â”‚ â”‚
â”‚  â”‚        [ä¿å­˜]                         â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                             â”‚
â”‚  ç•Œé¢è®¾ç½®                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ä¸»é¢˜: â—‹ äº®è‰² â— æš—è‰²                   â”‚ â”‚
â”‚  â”‚ è¯­è¨€: [ä¸‹æ‹‰é€‰æ‹©] ä¸­æ–‡                  â”‚ â”‚
â”‚  â”‚        [ä¿å­˜]                         â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### API è°ƒç”¨
- `GET /api/v1/auth/me` - è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯
- `PUT /api/v1/auth/me` - æ›´æ–°ç”¨æˆ·ä¿¡æ¯
- `POST /api/v1/auth/reset-password` - ä¿®æ”¹å¯†ç 
- `GET /api/v1/users/settings` - è·å–ç”¨æˆ·è®¾ç½®
- `PUT /api/v1/users/settings` - æ›´æ–°ç”¨æˆ·è®¾ç½®

---

### 7. ç”¨æˆ·ç®¡ç†é¡µé¢ (`/admin/users`) - ä»…ç®¡ç†å‘˜

#### åŠŸèƒ½
- ç”¨æˆ·åˆ—è¡¨ï¼ˆåˆ†é¡µï¼‰
- æœç´¢ç”¨æˆ·
- åˆ›å»ºç”¨æˆ·
- ç¼–è¾‘ç”¨æˆ·
- åˆ é™¤ç”¨æˆ·
- å¯ç”¨/ç¦ç”¨ç”¨æˆ·

#### UI è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç”¨æˆ·ç®¡ç†                          [+ æ–°å»º] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [æœç´¢æ¡†]  çŠ¶æ€: [å…¨éƒ¨â–¼]  è§’è‰²: [å…¨éƒ¨â–¼]    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ç”¨æˆ·å â”‚ é‚®ç®± â”‚ æ˜µç§° â”‚ çŠ¶æ€ â”‚ æ“ä½œ    â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚ user1 â”‚ ... â”‚ ... â”‚ å¯ç”¨ â”‚ [ç¼–è¾‘][åˆ é™¤]â”‚ â”‚
â”‚  â”‚ user2 â”‚ ... â”‚ ... â”‚ ç¦ç”¨ â”‚ [ç¼–è¾‘][åˆ é™¤]â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                             â”‚
â”‚  [< ä¸Šä¸€é¡µ]  ç¬¬ 1 é¡µï¼Œå…± 10 é¡µ  [ä¸‹ä¸€é¡µ >] â”‚
â”‚                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### API è°ƒç”¨
- `GET /api/v1/users` - è·å–ç”¨æˆ·åˆ—è¡¨ï¼ˆåˆ†é¡µï¼‰
- `GET /api/v1/users/{user_id}` - è·å–ç”¨æˆ·è¯¦æƒ…
- `POST /api/v1/users` - åˆ›å»ºç”¨æˆ·
- `PUT /api/v1/users/{user_id}` - æ›´æ–°ç”¨æˆ·
- `DELETE /api/v1/users/{user_id}` - åˆ é™¤ç”¨æˆ·

---

## ç»„ä»¶è®¾è®¡

### 1. æ¶ˆæ¯ç»„ä»¶ (`MessageItem`)

```typescript
interface MessageItemProps {
  message: {
    id: number;
    role: 'user' | 'assistant' | 'system';
    content: string;
    created_at: string;
    metadata?: Record<string, any>;
  };
  onRegenerate?: (messageId: number) => void;
  isStreaming?: boolean;
}

// åŠŸèƒ½
// - æ ¹æ®è§’è‰²æ˜¾ç¤ºä¸åŒçš„æ ·å¼
// - æ”¯æŒ Markdown æ¸²æŸ“
// - æ”¯æŒä»£ç é«˜äº®
// - æ˜¾ç¤ºæ—¶é—´æˆ³
// - åŠ©æ‰‹æ¶ˆæ¯æ”¯æŒé‡æ–°ç”Ÿæˆ
```

### 2. è¾“å…¥æ¡†ç»„ä»¶ (`ChatInput`)

```typescript
interface ChatInputProps {
  onSubmit: (message: string) => void;
  onStreamSubmit?: (message: string) => void;
  disabled?: boolean;
  placeholder?: string;
}

// åŠŸèƒ½
// - å¤šè¡Œè¾“å…¥
// - æ”¯æŒ Ctrl+Enter å‘é€
// - æ˜¾ç¤ºå­—ç¬¦è®¡æ•°
// - æ”¯æŒæµå¼/éæµå¼åˆ‡æ¢
```

### 3. ä¼šè¯åˆ—è¡¨é¡¹ (`ConversationItem`)

```typescript
interface ConversationItemProps {
  conversation: {
    thread_id: string;
    title: string;
    updated_at: string;
    message_count: number;
  };
  isActive?: boolean;
  onClick: () => void;
  onEdit?: () => void;
  onDelete?: () => void;
}

// åŠŸèƒ½
// - æ˜¾ç¤ºä¼šè¯æ ‡é¢˜å’Œé¢„è§ˆ
// - æ˜¾ç¤ºæœ€åæ›´æ–°æ—¶é—´
// - æ”¯æŒç¼–è¾‘å’Œåˆ é™¤
```

### 4. åŠ è½½çŠ¶æ€ç»„ä»¶ (`LoadingSpinner`)

```typescript
// åŠŸèƒ½
// - æ˜¾ç¤ºåŠ è½½åŠ¨ç”»
// - æ”¯æŒä¸åŒå°ºå¯¸
// - æ”¯æŒè‡ªå®šä¹‰é¢œè‰²
```

### 5. é”™è¯¯æç¤ºç»„ä»¶ (`ErrorAlert`)

```typescript
interface ErrorAlertProps {
  message: string;
  onClose?: () => void;
  type?: 'error' | 'warning' | 'info';
}

// åŠŸèƒ½
// - æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
// - æ”¯æŒè‡ªåŠ¨å…³é—­
// - æ”¯æŒä¸åŒç±»å‹æ ·å¼
```

---

## çŠ¶æ€ç®¡ç†

### è®¤è¯çŠ¶æ€ (`authStore`)

```typescript
interface AuthState {
  user: User | null;
  accessToken: string | null;
  refreshToken: string | null;
  isAuthenticated: boolean;

  // Actions
  login: (username: string, password: string) => Promise<void>;
  logout: () => void;
  refreshAccessToken: () => Promise<void>;
  updateUser: (user: Partial<User>) => Promise<void>;
}
```

### å¯¹è¯çŠ¶æ€ (`chatStore`)

```typescript
interface ChatState {
  currentThreadId: string | null;
  conversations: Conversation[];
  messages: Record<string, Message[]>; // thread_id -> messages
  isLoading: boolean;
  isStreaming: boolean;

  // Actions
  setCurrentThread: (threadId: string) => void;
  sendMessage: (message: string, stream?: boolean) => Promise<void>;
  loadMessages: (threadId: string) => Promise<void>;
  regenerateMessage: (messageId: number) => Promise<void>;
  resetConversation: (threadId: string) => Promise<void>;
}
```

### è®¾ç½®çŠ¶æ€ (`settingsStore`)

```typescript
interface SettingsState {
  theme: 'light' | 'dark';
  language: string;
  defaultModel: string;
  defaultTemperature: number;
  defaultMaxTokens: number;

  // Actions
  updateSettings: (settings: Partial<SettingsState>) => Promise<void>;
  toggleTheme: () => void;
}
```

---

## API é›†æˆ

### API å®¢æˆ·ç«¯é…ç½®

```typescript
// api/client.ts
import axios from 'axios';

const apiClient = axios.create({
  baseURL: import.meta.env.VITE_API_BASE_URL || 'http://localhost:8000',
  timeout: 30000,
});

// è¯·æ±‚æ‹¦æˆªå™¨ - æ·»åŠ  token
apiClient.interceptors.request.use((config) => {
  const token = localStorage.getItem('access_token');
  if (token) {
    config.headers.Authorization = `Bearer ${token}`;
  }
  return config;
});

// å“åº”æ‹¦æˆªå™¨ - å¤„ç† token åˆ·æ–°
apiClient.interceptors.response.use(
  (response) => response,
  async (error) => {
    if (error.response?.status === 401) {
      // å°è¯•åˆ·æ–° token
      const refreshToken = localStorage.getItem('refresh_token');
      if (refreshToken) {
        try {
          const { data } = await axios.post('/api/v1/auth/refresh', {
            refresh_token: refreshToken,
          });
          localStorage.setItem('access_token', data.access_token);
          // é‡è¯•åŸè¯·æ±‚
          return apiClient.request(error.config);
        } catch {
          // åˆ·æ–°å¤±è´¥ï¼Œè·³è½¬åˆ°ç™»å½•é¡µ
          localStorage.clear();
          window.location.href = '/auth/login';
        }
      }
    }
    return Promise.reject(error);
  }
);

export default apiClient;
```

### API è°ƒç”¨ç¤ºä¾‹

```typescript
// api/chat.ts
import apiClient from './client';

export const chatApi = {
  // éæµå¼å¯¹è¯
  sendMessage: async (data: {
    message: string;
    thread_id?: string;
    metadata?: Record<string, any>;
  }) => {
    const response = await apiClient.post('/api/v1/chat', data);
    return response.data;
  },

  // æµå¼å¯¹è¯ï¼ˆä½¿ç”¨ EventSourceï¼‰
  sendMessageStream: (
    data: {
      message: string;
      thread_id?: string;
      metadata?: Record<string, any>;
    },
    onMessage: (content: string) => void,
    onDone: () => void,
    onError: (error: Error) => void
  ) => {
    const eventSource = new EventSource(
      `/api/v1/chat/stream?${new URLSearchParams({
        message: data.message,
        ...(data.thread_id && { thread_id: data.thread_id }),
      })}`
    );

    eventSource.onmessage = (event) => {
      const parsed = JSON.parse(event.data);
      if (parsed.done) {
        eventSource.close();
        onDone();
      } else if (parsed.error) {
        eventSource.close();
        onError(new Error(parsed.error));
      } else {
        onMessage(parsed.content);
      }
    };

    eventSource.onerror = (error) => {
      eventSource.close();
      onError(error as Error);
    };

    return () => eventSource.close();
  },
};
```

---

## UI/UX è®¾è®¡è§„èŒƒ

### é¢œè‰²ç³»ç»Ÿ

```css
/* äº®è‰²ä¸»é¢˜ */
--primary: #3b82f6;      /* ä¸»è‰²è°ƒ - è“è‰² */
--secondary: #64748b;    /* æ¬¡è¦è‰² - ç°è‰² */
--success: #10b981;      /* æˆåŠŸè‰² - ç»¿è‰² */
--warning: #f59e0b;      /* è­¦å‘Šè‰² - æ©™è‰² */
--error: #ef4444;        /* é”™è¯¯è‰² - çº¢è‰² */
--background: #ffffff;   /* èƒŒæ™¯è‰² */
--surface: #f8fafc;      /* è¡¨é¢è‰² */
--text-primary: #1e293b; /* ä¸»æ–‡æœ¬ */
--text-secondary: #64748b; /* æ¬¡è¦æ–‡æœ¬ */

/* æš—è‰²ä¸»é¢˜ */
--primary: #60a5fa;
--background: #0f172a;
--surface: #1e293b;
--text-primary: #f1f5f9;
--text-secondary: #94a3b8;
```

### å­—ä½“ç³»ç»Ÿ

```css
--font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
--font-mono: 'Fira Code', 'Consolas', monospace;

--text-xs: 0.75rem;    /* 12px */
--text-sm: 0.875rem;   /* 14px */
--text-base: 1rem;     /* 16px */
--text-lg: 1.125rem;   /* 18px */
--text-xl: 1.25rem;    /* 20px */
--text-2xl: 1.5rem;    /* 24px */
```

### é—´è·ç³»ç»Ÿ

```css
--spacing-1: 0.25rem;  /* 4px */
--spacing-2: 0.5rem;   /* 8px */
--spacing-3: 0.75rem;  /* 12px */
--spacing-4: 1rem;     /* 16px */
--spacing-6: 1.5rem;   /* 24px */
--spacing-8: 2rem;     /* 32px */
```

### åœ†è§’ç³»ç»Ÿ

```css
--radius-sm: 0.25rem;  /* 4px */
--radius-md: 0.5rem;   /* 8px */
--radius-lg: 0.75rem;  /* 12px */
--radius-xl: 1rem;     /* 16px */
--radius-full: 9999px; /* å®Œå…¨åœ†å½¢ */
```

### é˜´å½±ç³»ç»Ÿ

```css
--shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
--shadow-md: 0 4px 6px rgba(0, 0, 0, 0.1);
--shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.1);
```

---

## å“åº”å¼è®¾è®¡

### æ–­ç‚¹ç³»ç»Ÿ

```css
/* Tailwind CSS é»˜è®¤æ–­ç‚¹ */
sm: 640px;   /* å°å±å¹• */
md: 768px;   /* ä¸­ç­‰å±å¹• */
lg: 1024px;  /* å¤§å±å¹• */
xl: 1280px;  /* è¶…å¤§å±å¹• */
2xl: 1536px; /* è¶…è¶…å¤§å±å¹• */
```

### å¸ƒå±€é€‚é…

1. **ç§»åŠ¨ç«¯ (< 768px)**
   - å•æ å¸ƒå±€
   - ä¼šè¯åˆ—è¡¨å¯æŠ˜å ä¸ºæŠ½å±‰
   - è®¾ç½®é¢æ¿å¯æŠ˜å ä¸ºåº•éƒ¨æŠ½å±‰

2. **å¹³æ¿ (768px - 1024px)**
   - åŒæ å¸ƒå±€ï¼ˆä¼šè¯åˆ—è¡¨ + å¯¹è¯åŒºåŸŸï¼‰
   - è®¾ç½®é¢æ¿å¯æŠ˜å 

3. **æ¡Œé¢ (> 1024px)**
   - ä¸‰æ å¸ƒå±€ï¼ˆä¼šè¯åˆ—è¡¨ + å¯¹è¯åŒºåŸŸ + è®¾ç½®é¢æ¿ï¼‰
   - æ‰€æœ‰é¢æ¿åŒæ—¶æ˜¾ç¤º

---

## æ€§èƒ½ä¼˜åŒ–å»ºè®®

1. **ä»£ç åˆ†å‰²**
   - ä½¿ç”¨ React.lazy è¿›è¡Œè·¯ç”±çº§åˆ«çš„ä»£ç åˆ†å‰²
   - æŒ‰éœ€åŠ è½½ç»„ä»¶

2. **æ•°æ®ç¼“å­˜**
   - ä½¿ç”¨ TanStack Query è¿›è¡Œæ•°æ®ç¼“å­˜
   - è®¾ç½®åˆç†çš„ç¼“å­˜æ—¶é—´

3. **è™šæ‹Ÿæ»šåŠ¨**
   - æ¶ˆæ¯åˆ—è¡¨ä½¿ç”¨è™šæ‹Ÿæ»šåŠ¨ï¼ˆreact-window æˆ– react-virtualï¼‰
   - å¤„ç†å¤§é‡æ¶ˆæ¯æ—¶çš„æ€§èƒ½é—®é¢˜

4. **é˜²æŠ–å’ŒèŠ‚æµ**
   - æœç´¢è¾“å…¥ä½¿ç”¨é˜²æŠ–
   - æ»šåŠ¨äº‹ä»¶ä½¿ç”¨èŠ‚æµ

5. **å›¾ç‰‡ä¼˜åŒ–**
   - ä½¿ç”¨ WebP æ ¼å¼
   - å®ç°æ‡’åŠ è½½

---

## å®‰å…¨å»ºè®®

1. **Token å­˜å‚¨**
   - Access Token å­˜å‚¨åœ¨å†…å­˜æˆ– sessionStorage
   - Refresh Token å­˜å‚¨åœ¨ httpOnly Cookieï¼ˆæ¨èï¼‰æˆ– localStorage

2. **XSS é˜²æŠ¤**
   - ä½¿ç”¨ React çš„è‡ªåŠ¨è½¬ä¹‰
   - ä½¿ç”¨ DOMPurify æ¸…ç†ç”¨æˆ·è¾“å…¥çš„ HTML

3. **CSRF é˜²æŠ¤**
   - ä½¿ç”¨ CSRF Token
   - éªŒè¯è¯·æ±‚æ¥æº

4. **API å®‰å…¨**
   - æ‰€æœ‰ API è¯·æ±‚ä½¿ç”¨ HTTPS
   - å®ç°è¯·æ±‚ç­¾åï¼ˆå¯é€‰ï¼‰

---

## æµ‹è¯•å»ºè®®

1. **å•å…ƒæµ‹è¯•**
   - ä½¿ç”¨ Vitest æµ‹è¯•å·¥å…·å‡½æ•°å’Œç»„ä»¶
   - ä½¿ç”¨ React Testing Library æµ‹è¯•ç»„ä»¶

2. **é›†æˆæµ‹è¯•**
   - æµ‹è¯• API é›†æˆ
   - æµ‹è¯•ç”¨æˆ·æµç¨‹

3. **E2E æµ‹è¯•**
   - ä½¿ç”¨ Playwright æˆ– Cypress
   - æµ‹è¯•å…³é”®ç”¨æˆ·è·¯å¾„

---

## éƒ¨ç½²å»ºè®®

1. **æ„å»ºä¼˜åŒ–**
   - ä½¿ç”¨ Vite çš„ç”Ÿäº§æ„å»º
   - å¯ç”¨ä»£ç å‹ç¼©å’Œ Tree Shaking

2. **é™æ€èµ„æº**
   - ä½¿ç”¨ CDN åŠ é€Ÿ
   - å¯ç”¨ Gzip/Brotli å‹ç¼©

3. **ç¯å¢ƒå˜é‡**
   - ä½¿ç”¨ `.env` æ–‡ä»¶ç®¡ç†ç¯å¢ƒå˜é‡
   - åŒºåˆ†å¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ç¯å¢ƒ

---

## æ€»ç»“

æœ¬æ–‡æ¡£æä¾›äº† FastAPI + LangGraph å¯¹è¯ç³»ç»Ÿçš„å‰ç«¯è®¾è®¡è§„èŒƒï¼ŒåŒ…æ‹¬ï¼š

- âœ… å®Œæ•´çš„é¡µé¢è®¾è®¡
- âœ… ç»„ä»¶è®¾è®¡è§„èŒƒ
- âœ… çŠ¶æ€ç®¡ç†æ–¹æ¡ˆ
- âœ… API é›†æˆæ–¹æ¡ˆ
- âœ… UI/UX è®¾è®¡è§„èŒƒ
- âœ… å“åº”å¼è®¾è®¡
- âœ… æ€§èƒ½ä¼˜åŒ–å»ºè®®
- âœ… å®‰å…¨å»ºè®®

æŒ‰ç…§æœ¬æ–‡æ¡£è¿›è¡Œå‰ç«¯å¼€å‘ï¼Œå¯ä»¥æ„å»ºä¸€ä¸ªç°ä»£åŒ–ã€é«˜æ€§èƒ½ã€ç”¨æˆ·å‹å¥½çš„å¯¹è¯ç³»ç»Ÿå‰ç«¯åº”ç”¨ã€‚
